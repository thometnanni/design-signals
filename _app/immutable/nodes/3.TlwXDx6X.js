import{S as dl,i as vl,s as pl,n as be,d as _,x as ve,y as gl,z as _e,A as ye,B as ue,f as H,h,C as de,v as r,D as Ce,j as C,k as w,l as Y,m as $,w as hl,o as L,p as F,q as x,E as ml,F as Le,G as fl,H as pe,I as me,J as ge,e as Ie}from"../chunks/D-GYNyiO.js";import{e as W,d as bl,l as kl,a as yl,g as ze,b as he,r as Ge,s as we,c as El,f as He,h as je}from"../chunks/9367h6-v.js";import"../chunks/IHki7fMi.js";const Sl=!0,Pl=Object.freeze(Object.defineProperty({__proto__:null,prerender:Sl},Symbol.toStringTag,{value:"Module"}));function qe(t,e,s){const l=t.slice();return l[27]=e[s],l}function We(t,e,s){const l=t.slice();return l[30]=e[s],l}function Ze(t,e,s){const l=t.slice();return l[33]=e[s],l[35]=s,l}function Je(t,e,s){const l=t.slice();return l[33]=e[s],l[37]=s,l}function Xe(t,e,s){const l=t.slice();return l[38]=e[s],l}function Ke(t,e,s){const l=t.slice();return l[38]=e[s],l}function Qe(t,e,s){const l=t.slice();return l[43]=e[s],l}function $e(t,e,s){const l=t.slice();return l[43]=e[s],l}function xe(t){let e,s=t[43].label+"",l;return{c(){e=L("option"),l=F(s),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=w(e);l=Y(n,s),n.forEach(_),this.h()},h(){e.__value=t[43].key,ue(e,e.__value),r(e,"class","svelte-k6dnu1")},m(a,n){H(a,e,n),h(e,l)},p:be,d(a){a&&_(e)}}}function el(t){let e,s=t[43].label+"",l;return{c(){e=L("option"),l=F(s),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=w(e);l=Y(n,s),n.forEach(_),this.h()},h(){e.__value=t[43].key,ue(e,e.__value),r(e,"class","svelte-k6dnu1")},m(a,n){H(a,e,n),h(e,l)},p:be,d(a){a&&_(e)}}}function ll(t){let e,s=t[38].label+"",l;return{c(){e=L("option"),l=F(s),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=w(e);l=Y(n,s),n.forEach(_),this.h()},h(){e.__value=t[38].key,ue(e,e.__value),r(e,"class","svelte-k6dnu1")},m(a,n){H(a,e,n),h(e,l)},p:be,d(a){a&&_(e)}}}function tl(t){let e,s=t[38].label+"",l;return{c(){e=L("option"),l=F(s),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=w(e);l=Y(n,s),n.forEach(_),this.h()},h(){e.__value=t[38].key,ue(e,e.__value),r(e,"class","svelte-k6dnu1")},m(a,n){H(a,e,n),h(e,l)},p:be,d(a){a&&_(e)}}}function wl(t){let e,s="Loading data...";return{c(){e=L("p"),e.textContent=s,this.h()},l(l){e=C(l,"P",{class:!0,"data-svelte-h":!0}),hl(e)!=="svelte-slw5li"&&(e.textContent=s),this.h()},h(){r(e,"class","svelte-k6dnu1")},m(l,a){H(l,e,a)},p:be,d(l){l&&_(e)}}}function Il(t){let e,s,l,a,n,f,d,p,k=W(t[7]),v=[];for(let c=0;c<k.length;c+=1)v[c]=al(Je(t,k,c));let y=W(t[8]),g=[];for(let c=0;c<y.length;c+=1)g[c]=ul(qe(t,y,c));return{c(){e=L("div"),s=L("div"),l=F(" "),a=x(),n=ge("svg");for(let c=0;c<v.length;c+=1)v[c].c();d=x();for(let c=0;c<g.length;c+=1)g[c].c();p=me(),this.h()},l(c){e=C(c,"DIV",{class:!0});var I=w(e);s=C(I,"DIV",{class:!0,style:!0});var u=w(s);l=Y(u," "),u.forEach(_),a=$(I),n=pe(I,"svg",{class:!0,width:!0,height:!0});var T=w(n);for(let m=0;m<v.length;m+=1)v[m].l(T);T.forEach(_),I.forEach(_),d=$(c);for(let m=0;m<g.length;m+=1)g[m].l(c);p=me(),this.h()},h(){r(s,"class","label svelte-k6dnu1"),fl(s,"width",_l+"cm"),r(n,"class","ticks-svg svelte-k6dnu1"),r(n,"width",f=t[0]+"cm"),r(n,"height","1cm"),r(e,"class","header-row svelte-k6dnu1")},m(c,I){H(c,e,I),h(e,s),h(s,l),h(e,a),h(e,n);for(let u=0;u<v.length;u+=1)v[u]&&v[u].m(n,null);H(c,d,I);for(let u=0;u<g.length;u+=1)g[u]&&g[u].m(c,I);H(c,p,I)},p(c,I){if(I[0]&642){k=W(c[7]);let u;for(u=0;u<k.length;u+=1){const T=Je(c,k,u);v[u]?v[u].p(T,I):(v[u]=al(T),v[u].c(),v[u].m(n,null))}for(;u<v.length;u+=1)v[u].d(1);v.length=k.length}if(I[0]&1&&f!==(f=c[0]+"cm")&&r(n,"width",f),I[0]&100227){y=W(c[8]);let u;for(u=0;u<y.length;u+=1){const T=qe(c,y,u);g[u]?g[u].p(T,I):(g[u]=ul(T),g[u].c(),g[u].m(p.parentNode,p))}for(;u<g.length;u+=1)g[u].d(1);g.length=y.length}},d(c){c&&(_(e),_(d),_(p)),ve(v,c),ve(g,c)}}}function sl(t){let e,s,l,a,n,f,d=t[33]+"",p,k;return{c(){e=ge("g"),s=ge("line"),f=ge("text"),p=F(d),this.h()},l(v){e=pe(v,"g",{class:!0});var y=w(e);s=pe(y,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),w(s).forEach(_),f=pe(y,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var g=w(f);p=Y(g,d),g.forEach(_),y.forEach(_),this.h()},h(){r(s,"x1",l=t[9](t[33])),r(s,"x2",a=t[9](t[33])),r(s,"y1",0),r(s,"y2",n=z(t[1])),r(s,"class","tick-line svelte-k6dnu1"),r(f,"x",k=t[9](t[33])),r(f,"y",13),r(f,"text-anchor","middle"),r(f,"class","tick-label svelte-k6dnu1"),r(e,"class","svelte-k6dnu1")},m(v,y){H(v,e,y),h(e,s),h(e,f),h(f,p)},p(v,y){y[0]&640&&l!==(l=v[9](v[33]))&&r(s,"x1",l),y[0]&640&&a!==(a=v[9](v[33]))&&r(s,"x2",a),y[0]&2&&n!==(n=z(v[1]))&&r(s,"y2",n),y[0]&128&&d!==(d=v[33]+"")&&Ie(p,d),y[0]&640&&k!==(k=v[9](v[33]))&&r(f,"x",k)},d(v){v&&_(e)}}}function al(t){let e=t[7].length<21||t[37]%Math.ceil(t[7].length/20)===0||t[37]===t[7].length-1,s,l=e&&sl(t);return{c(){l&&l.c(),s=me()},l(a){l&&l.l(a),s=me()},m(a,n){l&&l.m(a,n),H(a,s,n)},p(a,n){n[0]&128&&(e=a[7].length<21||a[37]%Math.ceil(a[7].length/20)===0||a[37]===a[7].length-1),e?l?l.p(a,n):(l=sl(a),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(a){a&&_(s),l&&l.d(a)}}}function nl(t){let e,s=W(t[27].items),l=[];for(let a=0;a<s.length;a+=1)l[a]=il(We(t,s,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=me()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=me()},m(a,n){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(a,n);H(a,e,n)},p(a,n){if(n[0]&34691){s=W(a[27].items);let f;for(f=0;f<s.length;f+=1){const d=We(a,s,f);l[f]?l[f].p(d,n):(l[f]=il(d),l[f].c(),l[f].m(e.parentNode,e))}for(;f<l.length;f+=1)l[f].d(1);l.length=s.length}},d(a){a&&_(e),ve(l,a)}}}function rl(t){let e,s,l,a;return{c(){e=ge("line"),this.h()},l(n){e=pe(n,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),w(e).forEach(_),this.h()},h(){r(e,"x1",s=t[9](t[33])),r(e,"x2",l=t[9](t[33])),r(e,"y1",0),r(e,"y2",a=z(t[1])),r(e,"class","grid-line svelte-k6dnu1")},m(n,f){H(n,e,f)},p(n,f){f[0]&640&&s!==(s=n[9](n[33]))&&r(e,"x1",s),f[0]&640&&l!==(l=n[9](n[33]))&&r(e,"x2",l),f[0]&2&&a!==(a=z(n[1]))&&r(e,"y2",a)},d(n){n&&_(e)}}}function ol(t){let e=t[7].length<21||t[35]%Math.ceil(t[7].length/20)===0||t[35]===t[7].length-1,s,l=e&&rl(t);return{c(){l&&l.c(),s=me()},l(a){l&&l.l(a),s=me()},m(a,n){l&&l.m(a,n),H(a,s,n)},p(a,n){n[0]&128&&(e=a[7].length<21||a[35]%Math.ceil(a[7].length/20)===0||a[35]===a[7].length-1),e?l?l.p(a,n):(l=rl(a),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(a){a&&_(s),l&&l.d(a)}}}function il(t){let e,s,l,a=t[30].label+"",n,f,d,p,k,v,y,g,c,I,u,T,m,D=W(t[7]),b=[];for(let S=0;S<D.length;S+=1)b[S]=ol(Ze(t,D,S));return{c(){e=L("div"),s=L("div"),l=L("span"),n=F(a),f=x(),d=ge("svg");for(let S=0;S<b.length;S+=1)b[S].c();p=ge("line"),g=ge("path"),m=x(),this.h()},l(S){e=C(S,"DIV",{class:!0});var N=w(e);s=C(N,"DIV",{class:!0,style:!0});var E=w(s);l=C(E,"SPAN",{class:!0});var Z=w(l);n=Y(Z,a),Z.forEach(_),E.forEach(_),f=$(N),d=pe(N,"svg",{class:!0,width:!0,height:!0});var ie=w(d);for(let j=0;j<b.length;j+=1)b[j].l(ie);p=pe(ie,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),w(p).forEach(_),g=pe(ie,"path",{d:!0,class:!0}),w(g).forEach(_),ie.forEach(_),m=$(N),N.forEach(_),this.h()},h(){r(l,"class","svelte-k6dnu1"),r(s,"class","label svelte-k6dnu1"),fl(s,"width",_l+"cm"),r(p,"x1",z(t[10].left)),r(p,"x2",k=z(t[0])-z(t[10].right)),r(p,"y1",v=z(t[1])/2),r(p,"y2",y=z(t[1])/2),r(p,"class","baseline-line svelte-k6dnu1"),r(g,"d",c=t[30].path),r(g,"class",I="path "+(t[15].has(t[30].label)?"selected":"")+" svelte-k6dnu1"),r(d,"class","row-svg svelte-k6dnu1"),r(d,"width",u=t[0]+"cm"),r(d,"height",T=t[1]+"cm"),r(e,"class","row svelte-k6dnu1")},m(S,N){H(S,e,N),h(e,s),h(s,l),h(l,n),h(e,f),h(e,d);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(d,null);h(d,p),h(d,g),h(e,m)},p(S,N){if(N[0]&256&&a!==(a=S[30].label+"")&&Ie(n,a),N[0]&642){D=W(S[7]);let E;for(E=0;E<D.length;E+=1){const Z=Ze(S,D,E);b[E]?b[E].p(Z,N):(b[E]=ol(Z),b[E].c(),b[E].m(d,p))}for(;E<b.length;E+=1)b[E].d(1);b.length=D.length}N[0]&1&&k!==(k=z(S[0])-z(S[10].right))&&r(p,"x2",k),N[0]&2&&v!==(v=z(S[1])/2)&&r(p,"y1",v),N[0]&2&&y!==(y=z(S[1])/2)&&r(p,"y2",y),N[0]&256&&c!==(c=S[30].path)&&r(g,"d",c),N[0]&256&&I!==(I="path "+(S[15].has(S[30].label)?"selected":"")+" svelte-k6dnu1")&&r(g,"class",I),N[0]&1&&u!==(u=S[0]+"cm")&&r(d,"width",u),N[0]&2&&T!==(T=S[1]+"cm")&&r(d,"height",T)},d(S){S&&_(e),ve(b,S)}}}function ul(t){let e,s,l,a=(t[27].key||"Unassigned")+"",n,f,d,p,k=t[27].items.length+"",v,y,g=je(",.2f")(t[27].total)+"",c,I,u=!t[16].has(t[27].key),T,m=u&&nl(t);return{c(){e=L("div"),s=L("div"),l=L("div"),n=F(a),f=x(),d=L("div"),p=F("Items: "),v=F(k),y=F(" • Intensity: "),c=F(g),I=x(),m&&m.c(),T=x(),this.h()},l(D){e=C(D,"DIV",{class:!0});var b=w(e);s=C(b,"DIV",{class:!0});var S=w(s);l=C(S,"DIV",{class:!0});var N=w(l);n=Y(N,a),N.forEach(_),f=$(S),d=C(S,"DIV",{class:!0});var E=w(d);p=Y(E,"Items: "),v=Y(E,k),y=Y(E," • Intensity: "),c=Y(E,g),E.forEach(_),S.forEach(_),I=$(b),m&&m.l(b),T=$(b),b.forEach(_),this.h()},h(){r(l,"class","group-title svelte-k6dnu1"),r(d,"class","group-meta svelte-k6dnu1"),r(s,"class","group-header svelte-k6dnu1"),r(e,"class","group svelte-k6dnu1")},m(D,b){H(D,e,b),h(e,s),h(s,l),h(l,n),h(s,f),h(s,d),h(d,p),h(d,v),h(d,y),h(d,c),h(e,I),m&&m.m(e,null),h(e,T)},p(D,b){b[0]&256&&a!==(a=(D[27].key||"Unassigned")+"")&&Ie(n,a),b[0]&256&&k!==(k=D[27].items.length+"")&&Ie(v,k),b[0]&256&&g!==(g=je(",.2f")(D[27].total)+"")&&Ie(c,g),b[0]&256&&(u=!D[16].has(D[27].key)),u?m?m.p(D,b):(m=nl(D),m.c(),m.m(e,T)):m&&(m.d(1),m=null)},d(D){D&&_(e),m&&m.d()}}}function Cl(t){let e,s,l,a,n,f,d,p,k,v,y,g,c,I,u,T,m,D,b,S="Download all rows as SVG",N,E,Z,ie,j,Ee,ce,Se,se,fe,q,ee,ae,re,ne,P,V,U=W(t[11]),A=[];for(let i=0;i<U.length;i+=1)A[i]=xe($e(t,U,i));let oe=W(t[12]),R=[];for(let i=0;i<oe.length;i+=1)R[i]=el(Qe(t,oe,i));let J=W(t[13]),O=[];for(let i=0;i<J.length;i+=1)O[i]=ll(Ke(t,J,i));let X=W(t[14]),M=[];for(let i=0;i<X.length;i+=1)M[i]=tl(Xe(t,X,i));function B(i,G){return i[8].length>0?Il:wl}let le=B(t),te=le(t);return{c(){e=L("div"),s=L("div"),l=L("label"),a=F(`Parameter:
      `),n=L("select");for(let i=0;i<A.length;i+=1)A[i].c();f=x(),d=L("label"),p=F(`Amplitude (cm):
      `),k=L("input"),v=x(),y=L("label"),g=F(`Row height (cm):
      `),c=L("input"),I=x(),u=L("label"),T=F(`Graph width (cm):
      `),m=L("input"),D=x(),b=L("button"),b.textContent=S,N=x(),E=L("div"),Z=L("label"),ie=F(`Group by:
      `),j=L("select");for(let i=0;i<R.length;i+=1)R[i].c();Ee=x(),ce=L("label"),Se=F(`Group sort:
      `),se=L("select");for(let i=0;i<O.length;i+=1)O[i].c();fe=x(),q=L("label"),ee=F(`Item sort:
      `),ae=L("select");for(let i=0;i<M.length;i+=1)M[i].c();re=x(),ne=L("article"),te.c(),this.h()},l(i){e=C(i,"DIV",{class:!0});var G=w(e);s=C(G,"DIV",{class:!0});var o=w(s);l=C(o,"LABEL",{class:!0});var K=w(l);a=Y(K,`Parameter:
      `),n=C(K,"SELECT",{class:!0});var Ue=w(n);for(let Q=0;Q<A.length;Q+=1)A[Q].l(Ue);Ue.forEach(_),K.forEach(_),f=$(o),d=C(o,"LABEL",{class:!0});var De=w(d);p=Y(De,`Amplitude (cm):
      `),k=C(De,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),De.forEach(_),v=$(o),y=C(o,"LABEL",{class:!0});var Ne=w(y);g=Y(Ne,`Row height (cm):
      `),c=C(Ne,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),Ne.forEach(_),I=$(o),u=C(o,"LABEL",{class:!0});var Ve=w(u);T=Y(Ve,`Graph width (cm):
      `),m=C(Ve,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),Ve.forEach(_),D=$(o),b=C(o,"BUTTON",{class:!0,"data-svelte-h":!0}),hl(b)!=="svelte-cvj6tw"&&(b.textContent=S),o.forEach(_),N=$(G),E=C(G,"DIV",{class:!0});var ke=w(E);Z=C(ke,"LABEL",{class:!0});var Te=w(Z);ie=Y(Te,`Group by:
      `),j=C(Te,"SELECT",{class:!0});var Oe=w(j);for(let Q=0;Q<R.length;Q+=1)R[Q].l(Oe);Oe.forEach(_),Te.forEach(_),Ee=$(ke),ce=C(ke,"LABEL",{class:!0});var Pe=w(ce);Se=Y(Pe,`Group sort:
      `),se=C(Pe,"SELECT",{class:!0});var Me=w(se);for(let Q=0;Q<O.length;Q+=1)O[Q].l(Me);Me.forEach(_),Pe.forEach(_),fe=$(ke),q=C(ke,"LABEL",{class:!0});var Be=w(q);ee=Y(Be,`Item sort:
      `),ae=C(Be,"SELECT",{class:!0});var Ye=w(ae);for(let Q=0;Q<M.length;Q+=1)M[Q].l(Ye);Ye.forEach(_),Be.forEach(_),ke.forEach(_),G.forEach(_),re=$(i),ne=C(i,"ARTICLE",{id:!0,class:!0});var Fe=w(ne);te.l(Fe),Fe.forEach(_),this.h()},h(){r(n,"class","svelte-k6dnu1"),t[3]===void 0&&Ce(()=>t[17].call(n)),r(l,"class","svelte-k6dnu1"),r(k,"type","number"),r(k,"step","0.1"),r(k,"min","0.1"),r(k,"max","12"),r(k,"class","svelte-k6dnu1"),r(d,"class","svelte-k6dnu1"),r(c,"type","number"),r(c,"step","0.1"),r(c,"min","0.2"),r(c,"max","6"),r(c,"class","svelte-k6dnu1"),r(y,"class","svelte-k6dnu1"),r(m,"type","number"),r(m,"step","0.1"),r(m,"min","5"),r(m,"max","60"),r(m,"class","svelte-k6dnu1"),r(u,"class","svelte-k6dnu1"),r(b,"class","svelte-k6dnu1"),r(s,"class","controls svelte-k6dnu1"),r(j,"class","svelte-k6dnu1"),t[4]===void 0&&Ce(()=>t[21].call(j)),r(Z,"class","svelte-k6dnu1"),r(se,"class","svelte-k6dnu1"),t[5]===void 0&&Ce(()=>t[22].call(se)),r(ce,"class","svelte-k6dnu1"),r(ae,"class","svelte-k6dnu1"),t[6]===void 0&&Ce(()=>t[23].call(ae)),r(q,"class","svelte-k6dnu1"),r(E,"class","controls svelte-k6dnu1"),r(e,"class","menu no-print svelte-k6dnu1"),r(ne,"id","chart"),r(ne,"class","svelte-k6dnu1")},m(i,G){H(i,e,G),h(e,s),h(s,l),h(l,a),h(l,n);for(let o=0;o<A.length;o+=1)A[o]&&A[o].m(n,null);_e(n,t[3],!0),h(s,f),h(s,d),h(d,p),h(d,k),ue(k,t[2]),h(s,v),h(s,y),h(y,g),h(y,c),ue(c,t[1]),h(s,I),h(s,u),h(u,T),h(u,m),ue(m,t[0]),h(s,D),h(s,b),h(e,N),h(e,E),h(E,Z),h(Z,ie),h(Z,j);for(let o=0;o<R.length;o+=1)R[o]&&R[o].m(j,null);_e(j,t[4],!0),h(E,Ee),h(E,ce),h(ce,Se),h(ce,se);for(let o=0;o<O.length;o+=1)O[o]&&O[o].m(se,null);_e(se,t[5],!0),h(E,fe),h(E,q),h(q,ee),h(q,ae);for(let o=0;o<M.length;o+=1)M[o]&&M[o].m(ae,null);_e(ae,t[6],!0),H(i,re,G),H(i,ne,G),te.m(ne,null),P||(V=[de(n,"change",t[17]),de(k,"input",t[18]),de(c,"input",t[19]),de(m,"input",t[20]),de(b,"click",Al),de(j,"change",t[21]),de(se,"change",t[22]),de(ae,"change",t[23])],P=!0)},p(i,G){if(G[0]&2048){U=W(i[11]);let o;for(o=0;o<U.length;o+=1){const K=$e(i,U,o);A[o]?A[o].p(K,G):(A[o]=xe(K),A[o].c(),A[o].m(n,null))}for(;o<A.length;o+=1)A[o].d(1);A.length=U.length}if(G[0]&2056&&_e(n,i[3]),G[0]&4&&ye(k.value)!==i[2]&&ue(k,i[2]),G[0]&2&&ye(c.value)!==i[1]&&ue(c,i[1]),G[0]&1&&ye(m.value)!==i[0]&&ue(m,i[0]),G[0]&4096){oe=W(i[12]);let o;for(o=0;o<oe.length;o+=1){const K=Qe(i,oe,o);R[o]?R[o].p(K,G):(R[o]=el(K),R[o].c(),R[o].m(j,null))}for(;o<R.length;o+=1)R[o].d(1);R.length=oe.length}if(G[0]&4112&&_e(j,i[4]),G[0]&8192){J=W(i[13]);let o;for(o=0;o<J.length;o+=1){const K=Ke(i,J,o);O[o]?O[o].p(K,G):(O[o]=ll(K),O[o].c(),O[o].m(se,null))}for(;o<O.length;o+=1)O[o].d(1);O.length=J.length}if(G[0]&8224&&_e(se,i[5]),G[0]&16384){X=W(i[14]);let o;for(o=0;o<X.length;o+=1){const K=Xe(i,X,o);M[o]?M[o].p(K,G):(M[o]=tl(K),M[o].c(),M[o].m(ae,null))}for(;o<M.length;o+=1)M[o].d(1);M.length=X.length}G[0]&16448&&_e(ae,i[6]),le===(le=B(i))&&te?te.p(i,G):(te.d(1),te=le(i),te&&(te.c(),te.m(ne,null)))},i:be,o:be,d(i){i&&(_(e),_(re),_(ne)),ve(A,i),ve(R,i),ve(O,i),ve(M,i),te.d(),P=!1,gl(V)}}}let _l=8.5;function z(t){return t*96/2.54}function cl(t){if(t==null)return 0;const e=String(t).trim().replace(/\s/g,"");if(/,/.test(e)&&/\./.test(e)&&e.lastIndexOf(",")>e.lastIndexOf("."))return parseFloat(e.replace(/\./g,"").replace(",","."));const s=e.replace(new RegExp("(?<=\\d)[.,](?=\\d{3}(\\D|$))","g"),"");return parseFloat(s.replace(",","."))}function Ae(t,e){for(const s of e)if(t[s]!=null)return t[s];return 0}function Re(t,e){return e==="export"?cl(Ae(t,["Export (Real Value USD)","Export  (Real Value USD)"])):e==="import"?cl(Ae(t,["Import (Real Value USD)","Import  (Real Value USD)"])):e==="normPCI"?parseFloat(String(Ae(t,["Norm PCI"])).replace(",","."))||0:e==="normRCA"&&parseFloat(String(Ae(t,["Norm RCA"])).replace(",","."))||0}function Ll(t,e){const s=t.cloneNode(!0),l=document.createElement("style");l.textContent=`
      .path{fill:none;stroke:#111;stroke-width:2;opacity:.95}
      .grid-line,.tick-line{display:none}
      .baseline-line{stroke:#ddd;stroke-width:1}
    `,s.insertBefore(l,s.firstChild);let n=new XMLSerializer().serializeToString(s);n=n.replace(/(<svg[^>]+)style="[^"]*background[^"]*"([^>]*>)/gi,"$1$2"),n=n.replace(/background:[^;"]*;?/gi,""),n=`<?xml version="1.0" encoding="UTF-8"?>
`+n;const f=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),d=URL.createObjectURL(f),p=document.createElement("a");p.href=d,p.download=e,document.body.appendChild(p),p.click(),setTimeout(()=>{document.body.removeChild(p),URL.revokeObjectURL(d)},150)}async function Al(){var e;const t=Array.from(document.querySelectorAll("svg.row-svg"));for(let s=0;s<t.length;s++){const l=t[s],a=(e=l.closest(".row"))==null?void 0:e.querySelector(".label button, .label span"),n=((a==null?void 0:a.textContent)||`chart_${s+1}`).trim().toLowerCase().replace(/[^a-z0-9_\-]+/g,"_");Ll(l,`${n}.svg`),await new Promise(f=>setTimeout(f,160))}}function Dl(t,e,s){let l=21,a=1,n=6,f={left:.3,right:.3,top:.1,bottom:.1},d=[{key:"tradeBalanceDiff",label:"Trade balance "},{key:"export",label:"Export (Real Value USD)"},{key:"normPCI",label:"Norm PCI"},{key:"normRCA",label:"Norm RCA"}],p=d[0].key,k=[{key:"Chemical Vertical",label:"Chemical Vertical"},{key:"Nace-2 Label",label:"NACE-2"},{key:"NACE-4 Labels",label:"NACE-4"},{key:"HS92-2 Short Label",label:"HS92-2"},{key:"HS92-4 Short Label",label:"HS92-4"}],v=k[0].key,y=[{key:"az",label:"Groups A–Z"},{key:"valueDesc",label:"Groups by intensity ↓"},{key:"valueAsc",label:"Groups by intensity ↑"}],g=y[0].key,c=[{key:"az",label:"Items A–Z"},{key:"valueDesc",label:"Items by intensity ↓"},{key:"valueAsc",label:"Items by intensity ↑"}],I=c[0].key,u=[],T=[],m=[],D=[],b,S=new Set,N=new Set;function E(){var ne;if(!T.length||!u.length||!b){m=[],s(8,D=[]);return}const fe=ze(T,P=>String(P["HS92-4 Short Label"]??"").trim()).sort(([P],[V])=>he(P,V)),q=[];let ee=0;for(const[P,V]of fe){const U=((ne=V[0])==null?void 0:ne[v])??"",A=Ge(V,B=>we(B,le=>Re(le,"export")),B=>B.Year),oe=Ge(V,B=>we(B,le=>Re(le,"import")),B=>B.Year),R=Ge(V,B=>we(B,le=>Re(le,p)),B=>B.Year);let J;p==="tradeBalanceDiff"?J=u.find(B=>(A.get(B)??0)!==0||(oe.get(B)??0)!==0)??u[0]:J=u.find(B=>(R.get(B)??0)!==0)??u[0];const O=p==="tradeBalanceDiff"?(A.get(J)??0)-(oe.get(J)??0):R.get(J)??0,X=u.map(B=>{let le;p==="tradeBalanceDiff"?le=(A.get(B)??0)-(oe.get(B)??0):le=R.get(B)??0;const te=le-O;return ee=Math.max(ee,Math.abs(te)),{year:B,value:te}}),M=we(X,B=>Math.abs(B.value));q.push({label:P,group:U,valuesAligned:X,intensity:M})}(!Number.isFinite(ee)||ee===0)&&(ee=1e-9);const ae=z(n);m=q.map(({label:P,group:V,valuesAligned:U,intensity:A})=>{const R=z(a)/2,J=X=>R-X/ee*ae,O=El().x(X=>b(X.year)).y(X=>J(X.value))(U);return{label:P,group:V,values:U,path:O,y:{domain:()=>[-ee,ee],baselineY:R,toY:J,_:"pulsar"},total:A}});let re=ze(m,P=>P.group).map(([P,V])=>({key:P,items:V,total:we(V,U=>U.total)}));g==="az"?re.sort((P,V)=>he(P.key||"",V.key||"")):g==="valueDesc"?re.sort((P,V)=>He(P.total,V.total)||he(P.key||"",V.key||"")):g==="valueAsc"&&re.sort((P,V)=>he(P.total,V.total)||he(P.key||"",V.key||"")),re=re.map(P=>{let V=P.items.slice();return I==="az"?V.sort((U,A)=>he(U.label,A.label)):I==="valueDesc"?V.sort((U,A)=>He(U.total,A.total)||he(U.label,A.label)):I==="valueAsc"&&V.sort((U,A)=>he(U.total,A.total)||he(U.label,A.label)),{...P,items:V}}),s(8,D=re)}ml(async()=>{const fe=await bl(";","data/data.csv",q=>({...q,Year:+q.Year}));T=fe,s(7,u=Array.from(new Set(fe.map(q=>q.Year))).sort((q,ee)=>q-ee))});function Z(){p=Le(this),s(3,p),s(11,d)}function ie(){n=ye(this.value),s(2,n)}function j(){a=ye(this.value),s(1,a)}function Ee(){l=ye(this.value),s(0,l)}function ce(){v=Le(this),s(4,v),s(12,k)}function Se(){g=Le(this),s(5,g),s(13,y)}function se(){I=Le(this),s(6,I),s(14,c)}return t.$$.update=()=>{t.$$.dirty[0]&255&&(u.length&&s(9,b=kl().domain(yl(u)).range([z(f.left),z(l)-z(f.right)])),E())},[l,a,n,p,v,g,I,u,D,b,f,d,k,y,c,S,N,Z,ie,j,Ee,ce,Se,se]}class Bl extends dl{constructor(e){super(),vl(this,e,Dl,Cl,pl,{},null,[-1,-1])}}export{Bl as component,Pl as universal};
