import{S as Ml,i as Nl,s as Pl,n as Le,d,x as ge,y as Gl,z as be,A as Ue,B as ve,e as Ve,f as H,h as u,C as ye,v as i,D as Re,j as C,k as I,l as Y,m as W,w as Al,o as L,p as R,q as Z,E as Yl,V as Rl,F as Be,G as Dl,H as Ie,I as Ee,J as Ce}from"../chunks/D-GYNyiO.js";import{t as Bl,i as Ol,j as Ul,k as Fl,e as q,d as zl,l as $e,a as Hl,g as xe,b as ce,r as Ae,c as jl,s as ke,f as el,h as ll}from"../chunks/9367h6-v.js";import"../chunks/IHki7fMi.js";function tl(s,e){let l;if(e===void 0)for(const t of s)t!=null&&(l<t||l===void 0&&t>=t)&&(l=t);else{let t=-1;for(let a of s)(a=e(a,++t,s))!=null&&(l<a||l===void 0&&a>=a)&&(l=a)}return l}function sl(s,e){let l;if(e===void 0)for(const t of s)t!=null&&(l>t||l===void 0&&t>=t)&&(l=t);else{let t=-1;for(let a of s)(a=e(a,++t,s))!=null&&(l>a||l===void 0&&a>=a)&&(l=a)}return l}function al(s){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/s))}}function nl(s){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*s}}function ql(s){var e=1,l=s(al(e),nl(e));return l.constant=function(t){return arguments.length?s(al(e=+t),nl(e)):e},Fl(l)}function Vl(){var s=ql(Bl());return s.copy=function(){return Ol(s,Vl()).constant(s.constant())},Ul.apply(s,arguments)}const Wl=!0,tt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Wl},Symbol.toStringTag,{value:"Module"}));function ol(s,e,l){const t=s.slice();return t[30]=e[l],t}function rl(s,e,l){const t=s.slice();return t[33]=e[l],t}function il(s,e,l){const t=s.slice();return t[36]=e[l],t[38]=l,t}function cl(s,e,l){const t=s.slice();return t[36]=e[l],t[40]=l,t}function ul(s,e,l){const t=s.slice();return t[41]=e[l],t}function hl(s,e,l){const t=s.slice();return t[44]=e[l],t}function fl(s,e,l){const t=s.slice();return t[41]=e[l],t}function _l(s,e,l){const t=s.slice();return t[41]=e[l],t}function gl(s,e,l){const t=s.slice();return t[44]=e[l],t}function vl(s){let e,l=s[44].label+"",t;return{c(){e=L("option"),t=R(l),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=I(e);t=Y(n,l),n.forEach(d),this.h()},h(){e.__value=s[44].key,ve(e,e.__value),i(e,"class","svelte-caukgs")},m(a,n){H(a,e,n),u(e,t)},p:Le,d(a){a&&d(e)}}}function dl(s){let e,l=s[41].label+"",t;return{c(){e=L("option"),t=R(l),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=I(e);t=Y(n,l),n.forEach(d),this.h()},h(){e.__value=s[41].key,ve(e,e.__value),i(e,"class","svelte-caukgs")},m(a,n){H(a,e,n),u(e,t)},p:Le,d(a){a&&d(e)}}}function pl(s){let e,l=s[41].label+"",t;return{c(){e=L("option"),t=R(l),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=I(e);t=Y(n,l),n.forEach(d),this.h()},h(){e.__value=s[41].key,ve(e,e.__value),i(e,"class","svelte-caukgs")},m(a,n){H(a,e,n),u(e,t)},p:Le,d(a){a&&d(e)}}}function ml(s){let e,l=s[44].label+"",t;return{c(){e=L("option"),t=R(l),this.h()},l(a){e=C(a,"OPTION",{class:!0});var n=I(e);t=Y(n,l),n.forEach(d),this.h()},h(){e.__value=s[44].key,ve(e,e.__value),i(e,"class","svelte-caukgs")},m(a,n){H(a,e,n),u(e,t)},p:Le,d(a){a&&d(e)}}}function bl(s){let e,l,t,a=s[41].label+"",n,f,_,y,k;return _=Rl(s[23][0]),{c(){e=L("label"),l=L("input"),t=Z(),n=R(a),f=Z(),this.h()},l(g){e=C(g,"LABEL",{class:!0});var m=I(e);l=C(m,"INPUT",{type:!0,class:!0}),t=W(m),n=Y(m,a),f=W(m),m.forEach(d),this.h()},h(){i(l,"type","radio"),l.__value=s[41].key,ve(l,l.__value),i(l,"class","svelte-caukgs"),i(e,"class","svelte-caukgs"),_.p(l)},m(g,m){H(g,e,m),u(e,l),l.checked=l.__value===s[3],u(e,t),u(e,n),u(e,f),y||(k=ye(l,"change",s[22]),y=!0)},p(g,m){m[0]&8&&(l.checked=l.__value===g[3])},d(g){g&&d(e),_.r(),y=!1,k()}}}function Zl(s){let e,l="Loading data...";return{c(){e=L("p"),e.textContent=l,this.h()},l(t){e=C(t,"P",{class:!0,"data-svelte-h":!0}),Al(e)!=="svelte-slw5li"&&(e.textContent=l),this.h()},h(){i(e,"class","svelte-caukgs")},m(t,a){H(t,e,a)},p:Le,d(t){t&&d(e)}}}function Jl(s){let e,l,t,a,n,f,_,y,k=q(s[7]),g=[];for(let h=0;h<k.length;h+=1)g[h]=yl(cl(s,k,h));let m=q(s[9]),w=[];for(let h=0;h<m.length;h+=1)w[h]=Cl(ol(s,m,h));return{c(){e=L("div"),l=L("div"),t=R(" "),a=Z(),n=Ce("svg");for(let h=0;h<g.length;h+=1)g[h].c();_=Z();for(let h=0;h<w.length;h+=1)w[h].c();y=Ee(),this.h()},l(h){e=C(h,"DIV",{class:!0});var A=I(e);l=C(A,"DIV",{class:!0,style:!0});var c=I(l);t=Y(c," "),c.forEach(d),a=W(A),n=Ie(A,"svg",{class:!0,width:!0,height:!0});var v=I(n);for(let b=0;b<g.length;b+=1)g[b].l(v);v.forEach(d),A.forEach(d),_=W(h);for(let b=0;b<w.length;b+=1)w[b].l(h);y=Ee(),this.h()},h(){i(l,"class","label svelte-caukgs"),Dl(l,"width",Tl+"cm"),i(n,"class","ticks-svg svelte-caukgs"),i(n,"width",f=s[0]+"cm"),i(n,"height","1cm"),i(e,"class","header-row svelte-caukgs")},m(h,A){H(h,e,A),u(e,l),u(l,t),u(e,a),u(e,n);for(let c=0;c<g.length;c+=1)g[c]&&g[c].m(n,null);H(h,_,A);for(let c=0;c<w.length;c+=1)w[c]&&w[c].m(h,A);H(h,y,A)},p(h,A){if(A[0]&1154){k=q(h[7]);let c;for(c=0;c<k.length;c+=1){const v=cl(h,k,c);g[c]?g[c].p(v,A):(g[c]=yl(v),g[c].c(),g[c].m(n,null))}for(;c<g.length;c+=1)g[c].d(1);g.length=k.length}if(A[0]&1&&f!==(f=h[0]+"cm")&&i(n,"width",f),A[0]&198275){m=q(h[9]);let c;for(c=0;c<m.length;c+=1){const v=ol(h,m,c);w[c]?w[c].p(v,A):(w[c]=Cl(v),w[c].c(),w[c].m(y.parentNode,y))}for(;c<w.length;c+=1)w[c].d(1);w.length=m.length}},d(h){h&&(d(e),d(_),d(y)),ge(g,h),ge(w,h)}}}function kl(s){let e,l,t,a,n,f,_=s[36]+"",y,k;return{c(){e=Ce("g"),l=Ce("line"),f=Ce("text"),y=R(_),this.h()},l(g){e=Ie(g,"g",{class:!0});var m=I(e);l=Ie(m,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),I(l).forEach(d),f=Ie(m,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var w=I(f);y=Y(w,_),w.forEach(d),m.forEach(d),this.h()},h(){i(l,"x1",t=s[10](s[36])),i(l,"x2",a=s[10](s[36])),i(l,"y1",0),i(l,"y2",n=te(s[1])),i(l,"class","tick-line svelte-caukgs"),i(f,"x",k=s[10](s[36])),i(f,"y",13),i(f,"text-anchor","middle"),i(f,"class","tick-label svelte-caukgs"),i(e,"class","svelte-caukgs")},m(g,m){H(g,e,m),u(e,l),u(e,f),u(f,y)},p(g,m){m[0]&1152&&t!==(t=g[10](g[36]))&&i(l,"x1",t),m[0]&1152&&a!==(a=g[10](g[36]))&&i(l,"x2",a),m[0]&2&&n!==(n=te(g[1]))&&i(l,"y2",n),m[0]&128&&_!==(_=g[36]+"")&&Ve(y,_),m[0]&1152&&k!==(k=g[10](g[36]))&&i(f,"x",k)},d(g){g&&d(e)}}}function yl(s){let e=s[7].length<21||s[40]%Math.ceil(s[7].length/20)===0||s[40]===s[7].length-1,l,t=e&&kl(s);return{c(){t&&t.c(),l=Ee()},l(a){t&&t.l(a),l=Ee()},m(a,n){t&&t.m(a,n),H(a,l,n)},p(a,n){n[0]&128&&(e=a[7].length<21||a[40]%Math.ceil(a[7].length/20)===0||a[40]===a[7].length-1),e?t?t.p(a,n):(t=kl(a),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(a){a&&d(l),t&&t.d(a)}}}function El(s){let e,l=q(s[30].items),t=[];for(let a=0;a<l.length;a+=1)t[a]=Il(rl(s,l,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=Ee()},l(a){for(let n=0;n<t.length;n+=1)t[n].l(a);e=Ee()},m(a,n){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(a,n);H(a,e,n)},p(a,n){if(n[0]&67203){l=q(a[30].items);let f;for(f=0;f<l.length;f+=1){const _=rl(a,l,f);t[f]?t[f].p(_,n):(t[f]=Il(_),t[f].c(),t[f].m(e.parentNode,e))}for(;f<t.length;f+=1)t[f].d(1);t.length=l.length}},d(a){a&&d(e),ge(t,a)}}}function Sl(s){let e,l,t,a;return{c(){e=Ce("line"),this.h()},l(n){e=Ie(n,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),I(e).forEach(d),this.h()},h(){i(e,"x1",l=s[10](s[36])),i(e,"x2",t=s[10](s[36])),i(e,"y1",0),i(e,"y2",a=te(s[1])),i(e,"class","grid-line svelte-caukgs")},m(n,f){H(n,e,f)},p(n,f){f[0]&1152&&l!==(l=n[10](n[36]))&&i(e,"x1",l),f[0]&1152&&t!==(t=n[10](n[36]))&&i(e,"x2",t),f[0]&2&&a!==(a=te(n[1]))&&i(e,"y2",a)},d(n){n&&d(e)}}}function wl(s){let e=s[7].length<21||s[38]%Math.ceil(s[7].length/20)===0||s[38]===s[7].length-1,l,t=e&&Sl(s);return{c(){t&&t.c(),l=Ee()},l(a){t&&t.l(a),l=Ee()},m(a,n){t&&t.m(a,n),H(a,l,n)},p(a,n){n[0]&128&&(e=a[7].length<21||a[38]%Math.ceil(a[7].length/20)===0||a[38]===a[7].length-1),e?t?t.p(a,n):(t=Sl(a),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(a){a&&d(l),t&&t.d(a)}}}function Il(s){let e,l,t,a=s[33].label+"",n,f,_,y,k,g,m,w,h,A=q(s[7]),c=[];for(let v=0;v<A.length;v+=1)c[v]=wl(il(s,A,v));return{c(){e=L("div"),l=L("div"),t=L("span"),n=R(a),f=Z(),_=Ce("svg");for(let v=0;v<c.length;v+=1)c[v].c();y=Ce("path"),h=Z(),this.h()},l(v){e=C(v,"DIV",{class:!0});var b=I(e);l=C(b,"DIV",{class:!0,style:!0});var p=I(l);t=C(p,"SPAN",{class:!0});var M=I(t);n=Y(M,a),M.forEach(d),p.forEach(d),f=W(b),_=Ie(b,"svg",{class:!0,width:!0,height:!0});var B=I(_);for(let Q=0;Q<c.length;Q+=1)c[Q].l(B);y=Ie(B,"path",{d:!0,class:!0}),I(y).forEach(d),B.forEach(d),h=W(b),b.forEach(d),this.h()},h(){i(t,"class","svelte-caukgs"),i(l,"class","label svelte-caukgs"),Dl(l,"width",Tl+"cm"),i(y,"d",k=s[33].path),i(y,"class",g="path "+(s[16].has(s[33].label)?"selected":"")+" svelte-caukgs"),i(_,"class","row-svg svelte-caukgs"),i(_,"width",m=s[0]+"cm"),i(_,"height",w=s[1]+"cm"),i(e,"class","row svelte-caukgs")},m(v,b){H(v,e,b),u(e,l),u(l,t),u(t,n),u(e,f),u(e,_);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(_,null);u(_,y),u(e,h)},p(v,b){if(b[0]&512&&a!==(a=v[33].label+"")&&Ve(n,a),b[0]&1154){A=q(v[7]);let p;for(p=0;p<A.length;p+=1){const M=il(v,A,p);c[p]?c[p].p(M,b):(c[p]=wl(M),c[p].c(),c[p].m(_,y))}for(;p<c.length;p+=1)c[p].d(1);c.length=A.length}b[0]&512&&k!==(k=v[33].path)&&i(y,"d",k),b[0]&512&&g!==(g="path "+(v[16].has(v[33].label)?"selected":"")+" svelte-caukgs")&&i(y,"class",g),b[0]&1&&m!==(m=v[0]+"cm")&&i(_,"width",m),b[0]&2&&w!==(w=v[1]+"cm")&&i(_,"height",w)},d(v){v&&d(e),ge(c,v)}}}function Cl(s){let e,l,t,a=(s[30].key||"Unassigned")+"",n,f,_,y,k=s[30].items.length+"",g,m,w=ll(",.2f")(s[30].total)+"",h,A,c=!s[17].has(s[30].key),v,b=c&&El(s);return{c(){e=L("div"),l=L("div"),t=L("div"),n=R(a),f=Z(),_=L("div"),y=R("Items: "),g=R(k),m=R(" • Total: "),h=R(w),A=Z(),b&&b.c(),v=Z(),this.h()},l(p){e=C(p,"DIV",{class:!0});var M=I(e);l=C(M,"DIV",{class:!0});var B=I(l);t=C(B,"DIV",{class:!0});var Q=I(t);n=Y(Q,a),Q.forEach(d),f=W(B),_=C(B,"DIV",{class:!0});var se=I(_);y=Y(se,"Items: "),g=Y(se,k),m=Y(se," • Total: "),h=Y(se,w),se.forEach(d),B.forEach(d),A=W(M),b&&b.l(M),v=W(M),M.forEach(d),this.h()},h(){i(t,"class","group-title svelte-caukgs"),i(_,"class","group-meta svelte-caukgs"),i(l,"class","group-header svelte-caukgs"),i(e,"class","group svelte-caukgs")},m(p,M){H(p,e,M),u(e,l),u(l,t),u(t,n),u(l,f),u(l,_),u(_,y),u(_,g),u(_,m),u(_,h),u(e,A),b&&b.m(e,null),u(e,v)},p(p,M){M[0]&512&&a!==(a=(p[30].key||"Unassigned")+"")&&Ve(n,a),M[0]&512&&k!==(k=p[30].items.length+"")&&Ve(g,k),M[0]&512&&w!==(w=ll(",.2f")(p[30].total)+"")&&Ve(h,w),M[0]&512&&(c=!p[17].has(p[30].key)),c?b?b.p(p,M):(b=El(p),b.c(),b.m(e,v)):b&&(b.d(1),b=null)},d(p){p&&d(e),b&&b.d()}}}function Xl(s){let e,l,t,a,n,f,_,y,k,g,m,w,h,A,c,v,b,p,M,B,Q,se,$,ue,Te,x,Me,he,Ne,ee,Pe,oe,re="Download all rows as SVG",J,K,Se,de=(s[1]*s[8].length).toFixed(1)+"",we,ie,D,E,P,T,G=q(s[13]),N=[];for(let r=0;r<G.length;r+=1)N[r]=vl(gl(s,G,r));let ae=q(s[14]),U=[];for(let r=0;r<ae.length;r+=1)U[r]=dl(_l(s,ae,r));let le=q(s[15]),O=[];for(let r=0;r<le.length;r+=1)O[r]=pl(fl(s,le,r));let pe=q(s[11]),F=[];for(let r=0;r<pe.length;r+=1)F[r]=ml(hl(s,pe,r));let fe=q(s[12]),S=[];for(let r=0;r<fe.length;r+=1)S[r]=bl(ul(s,fe,r));function X(r,V){return r[9].length>0?Jl:Zl}let _e=X(s),ne=_e(s);return{c(){e=L("div"),l=L("div"),t=L("label"),a=R(`Group by:
      `),n=L("select");for(let r=0;r<N.length;r+=1)N[r].c();f=Z(),_=L("label"),y=R(`Group sort:
      `),k=L("select");for(let r=0;r<U.length;r+=1)U[r].c();g=Z(),m=L("label"),w=R(`Item sort:
      `),h=L("select");for(let r=0;r<O.length;r+=1)O[r].c();A=Z(),c=L("div"),v=L("label"),b=R(`Parameter:
      `),p=L("select");for(let r=0;r<F.length;r+=1)F[r].c();M=Z(),B=L("label"),Q=R(`Mode:
      `);for(let r=0;r<S.length;r+=1)S[r].c();se=Z(),$=L("div"),ue=L("label"),Te=R(`Graph width (cm):
      `),x=L("input"),Me=Z(),he=L("label"),Ne=R(`Row height (cm):
      `),ee=L("input"),Pe=Z(),oe=L("button"),oe.textContent=re,J=Z(),K=L("div"),Se=R("Chart height: "),we=R(de),ie=R(" cm"),D=Z(),E=L("article"),ne.c(),this.h()},l(r){e=C(r,"DIV",{class:!0});var V=I(e);l=C(V,"DIV",{class:!0});var o=I(l);t=C(o,"LABEL",{class:!0});var j=I(t);a=Y(j,`Group by:
      `),n=C(j,"SELECT",{class:!0});var Ze=I(n);for(let z=0;z<N.length;z+=1)N[z].l(Ze);Ze.forEach(d),j.forEach(d),f=W(o),_=C(o,"LABEL",{class:!0});var Fe=I(_);y=Y(Fe,`Group sort:
      `),k=C(Fe,"SELECT",{class:!0});var Je=I(k);for(let z=0;z<U.length;z+=1)U[z].l(Je);Je.forEach(d),Fe.forEach(d),g=W(o),m=C(o,"LABEL",{class:!0});var ze=I(m);w=Y(ze,`Item sort:
      `),h=C(ze,"SELECT",{class:!0});var Xe=I(h);for(let z=0;z<O.length;z+=1)O[z].l(Xe);Xe.forEach(d),ze.forEach(d),o.forEach(d),A=W(V),c=C(V,"DIV",{class:!0});var Ge=I(c);v=C(Ge,"LABEL",{class:!0});var He=I(v);b=Y(He,`Parameter:
      `),p=C(He,"SELECT",{class:!0});var Ke=I(p);for(let z=0;z<F.length;z+=1)F[z].l(Ke);Ke.forEach(d),He.forEach(d),M=W(Ge),B=C(Ge,"LABEL",{class:!0});var je=I(B);Q=Y(je,`Mode:
      `);for(let z=0;z<S.length;z+=1)S[z].l(je);je.forEach(d),Ge.forEach(d),se=W(V),$=C(V,"DIV",{class:!0});var me=I($);ue=C(me,"LABEL",{class:!0});var qe=I(ue);Te=Y(qe,`Graph width (cm):
      `),x=C(qe,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),qe.forEach(d),Me=W(me),he=C(me,"LABEL",{class:!0});var We=I(he);Ne=Y(We,`Row height (cm):
      `),ee=C(We,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),We.forEach(d),Pe=W(me),oe=C(me,"BUTTON",{class:!0,"data-svelte-h":!0}),Al(oe)!=="svelte-cvj6tw"&&(oe.textContent=re),J=W(me),K=C(me,"DIV",{class:!0});var Ye=I(K);Se=Y(Ye,"Chart height: "),we=Y(Ye,de),ie=Y(Ye," cm"),Ye.forEach(d),me.forEach(d),V.forEach(d),D=W(r),E=C(r,"ARTICLE",{id:!0,class:!0});var Qe=I(E);ne.l(Qe),Qe.forEach(d),this.h()},h(){i(n,"class","svelte-caukgs"),s[4]===void 0&&Re(()=>s[18].call(n)),i(t,"class","svelte-caukgs"),i(k,"class","svelte-caukgs"),s[5]===void 0&&Re(()=>s[19].call(k)),i(_,"class","svelte-caukgs"),i(h,"class","svelte-caukgs"),s[6]===void 0&&Re(()=>s[20].call(h)),i(m,"class","svelte-caukgs"),i(l,"class","controls svelte-caukgs"),i(p,"class","svelte-caukgs"),s[2]===void 0&&Re(()=>s[21].call(p)),i(v,"class","svelte-caukgs"),i(B,"class","svelte-caukgs"),i(c,"class","controls svelte-caukgs"),i(x,"type","number"),i(x,"step","0.1"),i(x,"min","5"),i(x,"max","60"),i(x,"class","svelte-caukgs"),i(ue,"class","svelte-caukgs"),i(ee,"type","number"),i(ee,"step","0.1"),i(ee,"min","0.5"),i(ee,"max","10"),i(ee,"class","svelte-caukgs"),i(he,"class","svelte-caukgs"),i(oe,"class","svelte-caukgs"),i(K,"class","hint svelte-caukgs"),i($,"class","controls svelte-caukgs"),i(e,"class","menu no-print svelte-caukgs"),i(E,"id","chart"),i(E,"class","svelte-caukgs")},m(r,V){H(r,e,V),u(e,l),u(l,t),u(t,a),u(t,n);for(let o=0;o<N.length;o+=1)N[o]&&N[o].m(n,null);be(n,s[4],!0),u(l,f),u(l,_),u(_,y),u(_,k);for(let o=0;o<U.length;o+=1)U[o]&&U[o].m(k,null);be(k,s[5],!0),u(l,g),u(l,m),u(m,w),u(m,h);for(let o=0;o<O.length;o+=1)O[o]&&O[o].m(h,null);be(h,s[6],!0),u(e,A),u(e,c),u(c,v),u(v,b),u(v,p);for(let o=0;o<F.length;o+=1)F[o]&&F[o].m(p,null);be(p,s[2],!0),u(c,M),u(c,B),u(B,Q);for(let o=0;o<S.length;o+=1)S[o]&&S[o].m(B,null);u(e,se),u(e,$),u($,ue),u(ue,Te),u(ue,x),ve(x,s[0]),u($,Me),u($,he),u(he,Ne),u(he,ee),ve(ee,s[1]),u($,Pe),u($,oe),u($,J),u($,K),u(K,Se),u(K,we),u(K,ie),H(r,D,V),H(r,E,V),ne.m(E,null),P||(T=[ye(n,"change",s[18]),ye(k,"change",s[19]),ye(h,"change",s[20]),ye(p,"change",s[21]),ye(x,"input",s[24]),ye(ee,"input",s[25]),ye(oe,"click",Ql)],P=!0)},p(r,V){if(V[0]&8192){G=q(r[13]);let o;for(o=0;o<G.length;o+=1){const j=gl(r,G,o);N[o]?N[o].p(j,V):(N[o]=vl(j),N[o].c(),N[o].m(n,null))}for(;o<N.length;o+=1)N[o].d(1);N.length=G.length}if(V[0]&8208&&be(n,r[4]),V[0]&16384){ae=q(r[14]);let o;for(o=0;o<ae.length;o+=1){const j=_l(r,ae,o);U[o]?U[o].p(j,V):(U[o]=dl(j),U[o].c(),U[o].m(k,null))}for(;o<U.length;o+=1)U[o].d(1);U.length=ae.length}if(V[0]&16416&&be(k,r[5]),V[0]&32768){le=q(r[15]);let o;for(o=0;o<le.length;o+=1){const j=fl(r,le,o);O[o]?O[o].p(j,V):(O[o]=pl(j),O[o].c(),O[o].m(h,null))}for(;o<O.length;o+=1)O[o].d(1);O.length=le.length}if(V[0]&32832&&be(h,r[6]),V[0]&2048){pe=q(r[11]);let o;for(o=0;o<pe.length;o+=1){const j=hl(r,pe,o);F[o]?F[o].p(j,V):(F[o]=ml(j),F[o].c(),F[o].m(p,null))}for(;o<F.length;o+=1)F[o].d(1);F.length=pe.length}if(V[0]&2052&&be(p,r[2]),V[0]&4104){fe=q(r[12]);let o;for(o=0;o<fe.length;o+=1){const j=ul(r,fe,o);S[o]?S[o].p(j,V):(S[o]=bl(j),S[o].c(),S[o].m(B,null))}for(;o<S.length;o+=1)S[o].d(1);S.length=fe.length}V[0]&1&&Ue(x.value)!==r[0]&&ve(x,r[0]),V[0]&2&&Ue(ee.value)!==r[1]&&ve(ee,r[1]),V[0]&258&&de!==(de=(r[1]*r[8].length).toFixed(1)+"")&&Ve(we,de),_e===(_e=X(r))&&ne?ne.p(r,V):(ne.d(1),ne=_e(r),ne&&(ne.c(),ne.m(E,null)))},i:Le,o:Le,d(r){r&&(d(e),d(D),d(E)),ge(N,r),ge(U,r),ge(O,r),ge(F,r),ge(S,r),ne.d(),P=!1,Gl(T)}}}let Tl=8.5;function te(s){return s*96/2.54}function Ll(s){if(s==null)return 0;const e=String(s).trim().replace(/\s/g,"");if(/,/.test(e)&&/\./.test(e)&&e.lastIndexOf(",")>e.lastIndexOf("."))return parseFloat(e.replace(/\./g,"").replace(",","."));const l=e.replace(new RegExp("(?<=\\d)[.,](?=\\d{3}(\\D|$))","g"),"");return parseFloat(l.replace(",","."))}function Oe(s,e){for(const l of e)if(s[l]!=null)return s[l];return 0}function De(s,e){return e==="export"?Ll(Oe(s,["Export (Real Value USD)","Export  (Real Value USD)"])):e==="import"?Ll(Oe(s,["Import (Real Value USD)","Import  (Real Value USD)"])):e==="normPCI"?parseFloat(String(Oe(s,["Norm PCI"])).replace(",","."))||0:e==="normRCA"&&parseFloat(String(Oe(s,["Norm RCA"])).replace(",","."))||0}function Kl(s,e){const l=s.cloneNode(!0),t=document.createElement("style");t.textContent=`
    .path{fill:none;stroke:#111;stroke-width:2;opacity:.7}
    .grid-line,.tick-line{display:none}
  `,l.insertBefore(t,l.firstChild);let n=new XMLSerializer().serializeToString(l);n=n.replace(/(<svg[^>]+)style="[^"]*background[^"]*"([^>]*>)/gi,"$1$2"),n=n.replace(/background:[^;"]*;?/gi,""),n=`<?xml version="1.0" encoding="UTF-8"?>
`+n;const f=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(f),y=document.createElement("a");y.href=_,y.download=e,document.body.appendChild(y),y.click(),setTimeout(()=>{document.body.removeChild(y),URL.revokeObjectURL(_)},100)}async function Ql(){var e;const s=Array.from(document.querySelectorAll("svg.row-svg"));for(let l=0;l<s.length;l++){const t=s[l],a=(e=t.closest(".row"))==null?void 0:e.querySelector(".label button, .label span"),n=((a==null?void 0:a.textContent)||`chart_${l+1}`).trim().toLowerCase().replace(/[^a-z0-9_\-]+/g,"_");Kl(t,`${n}.svg`),await new Promise(f=>setTimeout(f,200))}}function $l(s,e,l){let t=21,a=2,n={left:.3,right:.3,top:.1,bottom:.1},f=[{key:"normRCA",label:"Norm RCA"},{key:"normPCI",label:"Norm PCI"},{key:"export",label:"Export (Real Value USD)"},{key:"tradeBalanceDiff",label:"Trade balance"}],_=f[0].key,y=[{key:"normalized",label:"Global"},{key:"raw",label:"Local"},{key:"log",label:"Log"}],k=y[0].key,g=[{key:"Chemical Vertical",label:"Chemical Vertical"},{key:"Nace-2 Label",label:"NACE-2"},{key:"NACE-4 Labels",label:"NACE-4"},{key:"HS92-2 Short Label",label:"HS92-2"},{key:"HS92-4 Short Label",label:"HS92-4"}],m=g[0].key,w=[{key:"az",label:"Groups A–Z"},{key:"valueDesc",label:"Groups by total ↓"},{key:"valueAsc",label:"Groups by total ↑"}],h=w[0].key,A=[{key:"az",label:"Items A–Z"},{key:"valueDesc",label:"Items by total ↓"},{key:"valueAsc",label:"Items by total ↑"}],c=A[0].key,v=[],b=[],p=[],M=[],B,Q=new Set,se=new Set;function $(re){return ke(re,J=>J.value)}function ue(){if(!b.length||!v.length||!B){l(8,p=[]),l(9,M=[]);return}const re=xe(b,D=>String(D["HS92-4 Short Label"]??"").trim()).sort(([D],[E])=>ce(D,E));let J=[];for(const[,D]of re){const E=Ae(D,T=>ke(T,G=>De(G,"export")),T=>T.Year),P=Ae(D,T=>ke(T,G=>De(G,"import")),T=>T.Year);if(_==="tradeBalanceDiff"){const T=v[0],G=(E.get(T)??0)-(P.get(T)??0);for(const N of v){const ae=(E.get(N)??0)-(P.get(N)??0);J.push(ae-G)}}else{const T=Ae(D,G=>ke(G,N=>De(N,_)),G=>G.Year);for(const G of v)J.push(T.get(G)??0)}}const K=sl(J)??0,Se=tl(J)??1,de=te(a);let we=null;if(k==="log"){const D=K,E=Se,P=D===E?E===0?1:Math.abs(E)*.1:0;we=Vl().constant(1).domain([D-P,E+P]).range([de-te(n.bottom),te(n.top)]).clamp(!0)}l(8,p=re.map(([D,E])=>{var fe;const P=((fe=E[0])==null?void 0:fe[m])??"",T=Ae(E,S=>ke(S,X=>De(X,"export")),S=>S.Year),G=Ae(E,S=>ke(S,X=>De(X,"import")),S=>S.Year),N=Ae(E,S=>ke(S,X=>De(X,_)),S=>S.Year),ae=v[0],U=(T.get(ae)??0)-(G.get(ae)??0),le=v.map(S=>{let X;return _==="tradeBalanceDiff"?X=(T.get(S)??0)-(G.get(S)??0)-U:X=N.get(S)??0,k==="normalized"&&(X=Se!==K?(X-K)/(Se-K):.5),{year:S,value:X}});let O;if(k==="log")O=we;else{const S=sl(le,_e=>_e.value)??0,X=tl(le,_e=>_e.value)??1;O=$e().domain(k==="normalized"?[0,1]:S<0?[S,X]:[0,X||1]).range([de-te(n.bottom),te(n.top)])}const pe=jl().x(S=>B(S.year)).y(S=>O(S.value))(le),F=$(le);return{label:D,group:P,values:le,y:O,path:pe,total:F}}));let ie=xe(p,D=>D.group).map(([D,E])=>({key:D,items:E,total:ke(E,P=>P.total)}));h==="az"?ie.sort((D,E)=>ce(D.key||"",E.key||"")):h==="valueDesc"?ie.sort((D,E)=>el(D.total,E.total)||ce(D.key||"",E.key||"")):h==="valueAsc"&&ie.sort((D,E)=>ce(D.total,E.total)||ce(D.key||"",E.key||"")),ie=ie.map(D=>{let E=D.items.slice();return c==="selectedFirst"?E.sort((P,T)=>{const G=Q.has(P.label)?0:1,N=Q.has(T.label)?0:1;return G!==N?G-N:ce(P.label,T.label)}):c==="az"?E.sort((P,T)=>ce(P.label,T.label)):c==="valueDesc"?E.sort((P,T)=>el(P.total,T.total)||ce(P.label,T.label)):c==="valueAsc"&&E.sort((P,T)=>ce(P.total,T.total)||ce(P.label,T.label)),{...D,items:E}}),l(9,M=ie)}Yl(async()=>{const re=await zl(";","data/data.csv",J=>({...J,Year:+J.Year}));b=re,l(7,v=Array.from(new Set(re.map(J=>J.Year))).sort((J,K)=>J-K))});const Te=[[]];function x(){m=Be(this),l(4,m),l(13,g)}function Me(){h=Be(this),l(5,h),l(14,w)}function he(){c=Be(this),l(6,c),l(15,A)}function Ne(){_=Be(this),l(2,_),l(11,f)}function ee(){k=this.__value,l(3,k)}function Pe(){t=Ue(this.value),l(0,t)}function oe(){a=Ue(this.value),l(1,a)}return s.$$.update=()=>{s.$$.dirty[0]&255&&(v.length&&l(10,B=$e().domain(Hl(v)).range([te(n.left),te(t)-te(n.right)])),ue())},[t,a,_,k,m,h,c,v,p,M,B,f,y,g,w,A,Q,se,x,Me,he,Ne,ee,Te,Pe,oe]}class st extends Ml{constructor(e){super(),Nl(this,e,$l,Xl,Pl,{},null,[-1,-1])}}export{st as component,tt as universal};
