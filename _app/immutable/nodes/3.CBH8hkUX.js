import{S as vl,i as pl,s as gl,n as ke,d as p,x as pe,y as dl,z as _e,A as Ee,B as ce,C as ge,f as O,h as v,D as ve,v as o,E as Ce,j,k,l as K,m as te,w as fl,o as S,p as Q,q as se,F as ml,G as Ie,H as de,I as be,J as me,e as Ge}from"../chunks/Cl-g3Mic.js";import{e as H,d as bl,l as kl,a as yl,g as ze,b as ue,r as Ne,s as Se,c as El,f as He}from"../chunks/D64kcpLK.js";import"../chunks/IHki7fMi.js";const wl=!0,Bl=Object.freeze(Object.defineProperty({__proto__:null,prerender:wl},Symbol.toStringTag,{value:"Module"}));function qe(l,e,s){const t=l.slice();return t[27]=e[s],t}function We(l,e,s){const t=l.slice();return t[30]=e[s],t}function Ze(l,e,s){const t=l.slice();return t[33]=e[s],t[35]=s,t}function Je(l,e,s){const t=l.slice();return t[33]=e[s],t[37]=s,t}function Xe(l,e,s){const t=l.slice();return t[38]=e[s],t}function Ke(l,e,s){const t=l.slice();return t[38]=e[s],t}function Qe(l,e,s){const t=l.slice();return t[43]=e[s],t}function $e(l,e,s){const t=l.slice();return t[43]=e[s],t}function xe(l){let e,s=l[43].label+"",t;return{c(){e=S("option"),t=Q(s),this.h()},l(a){e=j(a,"OPTION",{class:!0});var n=k(e);t=K(n,s),n.forEach(p),this.h()},h(){e.__value=l[43].key,ce(e,e.__value),o(e,"class","svelte-1vjl3k7")},m(a,n){O(a,e,n),v(e,t)},p:ke,d(a){a&&p(e)}}}function el(l){let e,s=l[43].label+"",t;return{c(){e=S("option"),t=Q(s),this.h()},l(a){e=j(a,"OPTION",{class:!0});var n=k(e);t=K(n,s),n.forEach(p),this.h()},h(){e.__value=l[43].key,ce(e,e.__value),o(e,"class","svelte-1vjl3k7")},m(a,n){O(a,e,n),v(e,t)},p:ke,d(a){a&&p(e)}}}function ll(l){let e,s=l[38].label+"",t;return{c(){e=S("option"),t=Q(s),this.h()},l(a){e=j(a,"OPTION",{class:!0});var n=k(e);t=K(n,s),n.forEach(p),this.h()},h(){e.__value=l[38].key,ce(e,e.__value),o(e,"class","svelte-1vjl3k7")},m(a,n){O(a,e,n),v(e,t)},p:ke,d(a){a&&p(e)}}}function tl(l){let e,s=l[38].label+"",t;return{c(){e=S("option"),t=Q(s),this.h()},l(a){e=j(a,"OPTION",{class:!0});var n=k(e);t=K(n,s),n.forEach(p),this.h()},h(){e.__value=l[38].key,ce(e,e.__value),o(e,"class","svelte-1vjl3k7")},m(a,n){O(a,e,n),v(e,t)},p:ke,d(a){a&&p(e)}}}function jl(l){let e,s="Loading data...";return{c(){e=S("p"),e.textContent=s,this.h()},l(t){e=j(t,"P",{class:!0,"data-svelte-h":!0}),fl(e)!=="svelte-slw5li"&&(e.textContent=s),this.h()},h(){o(e,"class","svelte-1vjl3k7")},m(t,a){O(t,e,a)},p:ke,d(t){t&&p(e)}}}function Sl(l){let e,s,t,a,n,f,m,b,_=H(l[7]),u=[];for(let h=0;h<_.length;h+=1)u[h]=al(Je(l,_,h));let d=H(l[8]),g=[];for(let h=0;h<d.length;h+=1)g[h]=cl(qe(l,d,h));return{c(){e=S("div"),s=S("div"),t=Q(" "),a=se(),n=me("svg");for(let h=0;h<u.length;h+=1)u[h].c();m=se();for(let h=0;h<g.length;h+=1)g[h].c();b=be(),this.h()},l(h){e=j(h,"DIV",{class:!0});var y=k(e);s=j(y,"DIV",{class:!0,style:!0});var c=k(s);t=K(c," "),c.forEach(p),a=te(y),n=de(y,"svg",{class:!0,width:!0,height:!0});var N=k(n);for(let A=0;A<u.length;A+=1)u[A].l(N);N.forEach(p),y.forEach(p),m=te(h);for(let A=0;A<g.length;A+=1)g[A].l(h);b=be(),this.h()},h(){o(s,"class","label svelte-1vjl3k7"),ge(s,"width",_l+"cm"),o(n,"class","ticks-svg svelte-1vjl3k7"),o(n,"width",f=l[0]+"cm"),o(n,"height","1cm"),o(e,"class","header-row svelte-1vjl3k7")},m(h,y){O(h,e,y),v(e,s),v(s,t),v(e,a),v(e,n);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(n,null);O(h,m,y);for(let c=0;c<g.length;c+=1)g[c]&&g[c].m(h,y);O(h,b,y)},p(h,y){if(y[0]&642){_=H(h[7]);let c;for(c=0;c<_.length;c+=1){const N=Je(h,_,c);u[c]?u[c].p(N,y):(u[c]=al(N),u[c].c(),u[c].m(n,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=_.length}if(y[0]&1&&f!==(f=h[0]+"cm")&&o(n,"width",f),y[0]&100227){d=H(h[8]);let c;for(c=0;c<d.length;c+=1){const N=qe(h,d,c);g[c]?g[c].p(N,y):(g[c]=cl(N),g[c].c(),g[c].m(b.parentNode,b))}for(;c<g.length;c+=1)g[c].d(1);g.length=d.length}},d(h){h&&(p(e),p(m),p(b)),pe(u,h),pe(g,h)}}}function sl(l){let e,s,t,a,n,f,m=l[33]+"",b,_;return{c(){e=me("g"),s=me("line"),f=me("text"),b=Q(m),this.h()},l(u){e=de(u,"g",{class:!0});var d=k(e);s=de(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),k(s).forEach(p),f=de(d,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var g=k(f);b=K(g,m),g.forEach(p),d.forEach(p),this.h()},h(){o(s,"x1",t=l[9](l[33])),o(s,"x2",a=l[9](l[33])),o(s,"y1",0),o(s,"y2",n=M(l[1])),o(s,"class","tick-line svelte-1vjl3k7"),o(f,"x",_=l[9](l[33])),o(f,"y",13),o(f,"text-anchor","middle"),o(f,"class","tick-label svelte-1vjl3k7"),o(e,"class","svelte-1vjl3k7")},m(u,d){O(u,e,d),v(e,s),v(e,f),v(f,b)},p(u,d){d[0]&640&&t!==(t=u[9](u[33]))&&o(s,"x1",t),d[0]&640&&a!==(a=u[9](u[33]))&&o(s,"x2",a),d[0]&2&&n!==(n=M(u[1]))&&o(s,"y2",n),d[0]&128&&m!==(m=u[33]+"")&&Ge(b,m),d[0]&640&&_!==(_=u[9](u[33]))&&o(f,"x",_)},d(u){u&&p(e)}}}function al(l){let e=l[7].length<21||l[37]%Math.ceil(l[7].length/20)===0||l[37]===l[7].length-1,s,t=e&&sl(l);return{c(){t&&t.c(),s=be()},l(a){t&&t.l(a),s=be()},m(a,n){t&&t.m(a,n),O(a,s,n)},p(a,n){n[0]&128&&(e=a[7].length<21||a[37]%Math.ceil(a[7].length/20)===0||a[37]===a[7].length-1),e?t?t.p(a,n):(t=sl(a),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},d(a){a&&p(s),t&&t.d(a)}}}function nl(l){let e,s=H(l[27].items),t=[];for(let a=0;a<s.length;a+=1)t[a]=il(We(l,s,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=be()},l(a){for(let n=0;n<t.length;n+=1)t[n].l(a);e=be()},m(a,n){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(a,n);O(a,e,n)},p(a,n){if(n[0]&34691){s=H(a[27].items);let f;for(f=0;f<s.length;f+=1){const m=We(a,s,f);t[f]?t[f].p(m,n):(t[f]=il(m),t[f].c(),t[f].m(e.parentNode,e))}for(;f<t.length;f+=1)t[f].d(1);t.length=s.length}},d(a){a&&p(e),pe(t,a)}}}function ol(l){let e,s,t,a;return{c(){e=me("line"),this.h()},l(n){e=de(n,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),k(e).forEach(p),this.h()},h(){o(e,"x1",s=l[9](l[33])),o(e,"x2",t=l[9](l[33])),o(e,"y1",0),o(e,"y2",a=M(l[1])),o(e,"class","grid-line svelte-1vjl3k7")},m(n,f){O(n,e,f)},p(n,f){f[0]&640&&s!==(s=n[9](n[33]))&&o(e,"x1",s),f[0]&640&&t!==(t=n[9](n[33]))&&o(e,"x2",t),f[0]&2&&a!==(a=M(n[1]))&&o(e,"y2",a)},d(n){n&&p(e)}}}function rl(l){let e=l[7].length<21||l[35]%Math.ceil(l[7].length/20)===0||l[35]===l[7].length-1,s,t=e&&ol(l);return{c(){t&&t.c(),s=be()},l(a){t&&t.l(a),s=be()},m(a,n){t&&t.m(a,n),O(a,s,n)},p(a,n){n[0]&128&&(e=a[7].length<21||a[35]%Math.ceil(a[7].length/20)===0||a[35]===a[7].length-1),e?t?t.p(a,n):(t=ol(a),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},d(a){a&&p(s),t&&t.d(a)}}}function il(l){let e,s,t,a=l[30].label+"",n,f,m,b,_,u,d,g,h,y,c,N,A,$=H(l[7]),C=[];for(let E=0;E<$.length;E+=1)C[E]=rl(Ze(l,$,E));return{c(){e=S("div"),s=S("div"),t=S("span"),n=Q(a),f=se(),m=me("svg");for(let E=0;E<C.length;E+=1)C[E].c();b=me("line"),g=me("path"),A=se(),this.h()},l(E){e=j(E,"DIV",{class:!0});var B=k(e);s=j(B,"DIV",{class:!0,style:!0});var w=k(s);t=j(w,"SPAN",{class:!0});var q=k(t);n=K(q,a),q.forEach(p),w.forEach(p),f=te(B),m=de(B,"svg",{class:!0,width:!0,height:!0});var ie=k(m);for(let Y=0;Y<C.length;Y+=1)C[Y].l(ie);b=de(ie,"line",{x1:!0,x2:!0,y1:!0,y2:!0,class:!0}),k(b).forEach(p),g=de(ie,"path",{d:!0,class:!0}),k(g).forEach(p),ie.forEach(p),A=te(B),B.forEach(p),this.h()},h(){o(t,"class","svelte-1vjl3k7"),o(s,"class","label svelte-1vjl3k7"),ge(s,"width",_l+"cm"),o(b,"x1",M(l[10].left)),o(b,"x2",_=M(l[0])-M(l[10].right)),o(b,"y1",u=M(l[1])/2),o(b,"y2",d=M(l[1])/2),o(b,"class","baseline-line svelte-1vjl3k7"),o(g,"d",h=l[30].path),o(g,"class",y="path "+(l[15].has(l[30].label)?"selected":"")+" svelte-1vjl3k7"),o(m,"class","row-svg svelte-1vjl3k7"),o(m,"width",c=l[0]+"cm"),o(m,"height",N=l[1]+"cm"),o(e,"class","row svelte-1vjl3k7")},m(E,B){O(E,e,B),v(e,s),v(s,t),v(t,n),v(e,f),v(e,m);for(let w=0;w<C.length;w+=1)C[w]&&C[w].m(m,null);v(m,b),v(m,g),v(e,A)},p(E,B){if(B[0]&256&&a!==(a=E[30].label+"")&&Ge(n,a),B[0]&642){$=H(E[7]);let w;for(w=0;w<$.length;w+=1){const q=Ze(E,$,w);C[w]?C[w].p(q,B):(C[w]=rl(q),C[w].c(),C[w].m(m,b))}for(;w<C.length;w+=1)C[w].d(1);C.length=$.length}B[0]&1&&_!==(_=M(E[0])-M(E[10].right))&&o(b,"x2",_),B[0]&2&&u!==(u=M(E[1])/2)&&o(b,"y1",u),B[0]&2&&d!==(d=M(E[1])/2)&&o(b,"y2",d),B[0]&256&&h!==(h=E[30].path)&&o(g,"d",h),B[0]&256&&y!==(y="path "+(E[15].has(E[30].label)?"selected":"")+" svelte-1vjl3k7")&&o(g,"class",y),B[0]&1&&c!==(c=E[0]+"cm")&&o(m,"width",c),B[0]&2&&N!==(N=E[1]+"cm")&&o(m,"height",N)},d(E){E&&p(e),pe(C,E)}}}function cl(l){let e,s,t,a=(l[27].key||"Unassigned")+"",n,f,m=!l[16].has(l[27].key),b,_=m&&nl(l);return{c(){e=S("div"),s=S("div"),t=S("div"),n=Q(a),f=se(),_&&_.c(),b=se(),this.h()},l(u){e=j(u,"DIV",{class:!0});var d=k(e);s=j(d,"DIV",{class:!0,style:!0});var g=k(s);t=j(g,"DIV",{class:!0});var h=k(t);n=K(h,a),h.forEach(p),g.forEach(p),f=te(d),_&&_.l(d),b=te(d),d.forEach(p),this.h()},h(){o(t,"class","group-title svelte-1vjl3k7"),o(s,"class","group-header svelte-1vjl3k7"),ge(s,"height",l[1]+"cm"),o(e,"class","group svelte-1vjl3k7")},m(u,d){O(u,e,d),v(e,s),v(s,t),v(t,n),v(e,f),_&&_.m(e,null),v(e,b)},p(u,d){d[0]&256&&a!==(a=(u[27].key||"Unassigned")+"")&&Ge(n,a),d[0]&2&&ge(s,"height",u[1]+"cm"),d[0]&256&&(m=!u[16].has(u[27].key)),m?_?_.p(u,d):(_=nl(u),_.c(),_.m(e,b)):_&&(_.d(1),_=null)},d(u){u&&p(e),_&&_.d()}}}function Cl(l){let e,s,t,a,n,f,m,b,_,u,d,g,h,y,c,N,A,$,C,E="Download all rows as SVG",B,w,q,ie,Y,we,he,je,ae,fe,F,x,ne,oe,z,P,D,R=H(l[11]),I=[];for(let i=0;i<R.length;i+=1)I[i]=xe($e(l,R,i));let re=H(l[12]),V=[];for(let i=0;i<re.length;i+=1)V[i]=el(Qe(l,re,i));let W=H(l[13]),G=[];for(let i=0;i<W.length;i+=1)G[i]=ll(Ke(l,W,i));let Z=H(l[14]),U=[];for(let i=0;i<Z.length;i+=1)U[i]=tl(Xe(l,Z,i));function T(i,L){return i[8].length>0?Sl:jl}let ee=T(l),le=ee(l);return{c(){e=S("div"),s=S("div"),t=S("label"),a=Q(`Parameter:
      `),n=S("select");for(let i=0;i<I.length;i+=1)I[i].c();f=se(),m=S("label"),b=Q(`Amplitude (cm):
      `),_=S("input"),u=se(),d=S("label"),g=Q(`Row height (cm):
      `),h=S("input"),y=se(),c=S("label"),N=Q(`Graph width (cm):
      `),A=S("input"),$=se(),C=S("button"),C.textContent=E,B=se(),w=S("div"),q=S("label"),ie=Q(`Group by:
      `),Y=S("select");for(let i=0;i<V.length;i+=1)V[i].c();we=se(),he=S("label"),je=Q(`Group sort:
      `),ae=S("select");for(let i=0;i<G.length;i+=1)G[i].c();fe=se(),F=S("label"),x=Q(`Item sort:
      `),ne=S("select");for(let i=0;i<U.length;i+=1)U[i].c();oe=se(),z=S("article"),le.c(),this.h()},l(i){e=j(i,"DIV",{class:!0});var L=k(e);s=j(L,"DIV",{class:!0});var r=k(s);t=j(r,"LABEL",{class:!0});var J=k(t);a=K(J,`Parameter:
      `),n=j(J,"SELECT",{class:!0});var Ue=k(n);for(let X=0;X<I.length;X+=1)I[X].l(Ue);Ue.forEach(p),J.forEach(p),f=te(r),m=j(r,"LABEL",{class:!0});var Le=k(m);b=K(Le,`Amplitude (cm):
      `),_=j(Le,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),Le.forEach(p),u=te(r),d=j(r,"LABEL",{class:!0});var De=k(d);g=K(De,`Row height (cm):
      `),h=j(De,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),De.forEach(p),y=te(r),c=j(r,"LABEL",{class:!0});var Pe=k(c);N=K(Pe,`Graph width (cm):
      `),A=j(Pe,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),Pe.forEach(p),$=te(r),C=j(r,"BUTTON",{class:!0,"data-svelte-h":!0}),fl(C)!=="svelte-cvj6tw"&&(C.textContent=E),r.forEach(p),B=te(L),w=j(L,"DIV",{class:!0});var ye=k(w);q=j(ye,"LABEL",{class:!0});var Te=k(q);ie=K(Te,`Group by:
      `),Y=j(Te,"SELECT",{class:!0});var Me=k(Y);for(let X=0;X<V.length;X+=1)V[X].l(Me);Me.forEach(p),Te.forEach(p),we=te(ye),he=j(ye,"LABEL",{class:!0});var Be=k(he);je=K(Be,`Group sort:
      `),ae=j(Be,"SELECT",{class:!0});var Oe=k(ae);for(let X=0;X<G.length;X+=1)G[X].l(Oe);Oe.forEach(p),Be.forEach(p),fe=te(ye),F=j(ye,"LABEL",{class:!0});var Ve=k(F);x=K(Ve,`Item sort:
      `),ne=j(Ve,"SELECT",{class:!0});var Ye=k(ne);for(let X=0;X<U.length;X+=1)U[X].l(Ye);Ye.forEach(p),Ve.forEach(p),ye.forEach(p),L.forEach(p),oe=te(i),z=j(i,"ARTICLE",{id:!0,style:!0,class:!0});var Fe=k(z);le.l(Fe),Fe.forEach(p),this.h()},h(){o(n,"class","svelte-1vjl3k7"),l[3]===void 0&&Ce(()=>l[17].call(n)),o(t,"class","svelte-1vjl3k7"),o(_,"type","number"),o(_,"step","0.1"),o(_,"min","0.1"),o(_,"max","12"),o(_,"class","svelte-1vjl3k7"),o(m,"class","svelte-1vjl3k7"),o(h,"type","number"),o(h,"step","0.1"),o(h,"min","0.2"),o(h,"max","6"),o(h,"class","svelte-1vjl3k7"),o(d,"class","svelte-1vjl3k7"),o(A,"type","number"),o(A,"step","0.1"),o(A,"min","5"),o(A,"max","60"),o(A,"class","svelte-1vjl3k7"),o(c,"class","svelte-1vjl3k7"),o(C,"class","svelte-1vjl3k7"),o(s,"class","controls svelte-1vjl3k7"),o(Y,"class","svelte-1vjl3k7"),l[4]===void 0&&Ce(()=>l[21].call(Y)),o(q,"class","svelte-1vjl3k7"),o(ae,"class","svelte-1vjl3k7"),l[5]===void 0&&Ce(()=>l[22].call(ae)),o(he,"class","svelte-1vjl3k7"),o(ne,"class","svelte-1vjl3k7"),l[6]===void 0&&Ce(()=>l[23].call(ne)),o(F,"class","svelte-1vjl3k7"),o(w,"class","controls svelte-1vjl3k7"),o(e,"class","menu no-print svelte-1vjl3k7"),o(z,"id","chart"),ge(z,"padding-top",l[2]/2+"cm"),ge(z,"padding-bottom",l[2]/2+"cm"),o(z,"class","svelte-1vjl3k7")},m(i,L){O(i,e,L),v(e,s),v(s,t),v(t,a),v(t,n);for(let r=0;r<I.length;r+=1)I[r]&&I[r].m(n,null);_e(n,l[3],!0),v(s,f),v(s,m),v(m,b),v(m,_),ce(_,l[2]),v(s,u),v(s,d),v(d,g),v(d,h),ce(h,l[1]),v(s,y),v(s,c),v(c,N),v(c,A),ce(A,l[0]),v(s,$),v(s,C),v(e,B),v(e,w),v(w,q),v(q,ie),v(q,Y);for(let r=0;r<V.length;r+=1)V[r]&&V[r].m(Y,null);_e(Y,l[4],!0),v(w,we),v(w,he),v(he,je),v(he,ae);for(let r=0;r<G.length;r+=1)G[r]&&G[r].m(ae,null);_e(ae,l[5],!0),v(w,fe),v(w,F),v(F,x),v(F,ne);for(let r=0;r<U.length;r+=1)U[r]&&U[r].m(ne,null);_e(ne,l[6],!0),O(i,oe,L),O(i,z,L),le.m(z,null),P||(D=[ve(n,"change",l[17]),ve(_,"input",l[18]),ve(h,"input",l[19]),ve(A,"input",l[20]),ve(C,"click",Al),ve(Y,"change",l[21]),ve(ae,"change",l[22]),ve(ne,"change",l[23])],P=!0)},p(i,L){if(L[0]&2048){R=H(i[11]);let r;for(r=0;r<R.length;r+=1){const J=$e(i,R,r);I[r]?I[r].p(J,L):(I[r]=xe(J),I[r].c(),I[r].m(n,null))}for(;r<I.length;r+=1)I[r].d(1);I.length=R.length}if(L[0]&2056&&_e(n,i[3]),L[0]&4&&Ee(_.value)!==i[2]&&ce(_,i[2]),L[0]&2&&Ee(h.value)!==i[1]&&ce(h,i[1]),L[0]&1&&Ee(A.value)!==i[0]&&ce(A,i[0]),L[0]&4096){re=H(i[12]);let r;for(r=0;r<re.length;r+=1){const J=Qe(i,re,r);V[r]?V[r].p(J,L):(V[r]=el(J),V[r].c(),V[r].m(Y,null))}for(;r<V.length;r+=1)V[r].d(1);V.length=re.length}if(L[0]&4112&&_e(Y,i[4]),L[0]&8192){W=H(i[13]);let r;for(r=0;r<W.length;r+=1){const J=Ke(i,W,r);G[r]?G[r].p(J,L):(G[r]=ll(J),G[r].c(),G[r].m(ae,null))}for(;r<G.length;r+=1)G[r].d(1);G.length=W.length}if(L[0]&8224&&_e(ae,i[5]),L[0]&16384){Z=H(i[14]);let r;for(r=0;r<Z.length;r+=1){const J=Xe(i,Z,r);U[r]?U[r].p(J,L):(U[r]=tl(J),U[r].c(),U[r].m(ne,null))}for(;r<U.length;r+=1)U[r].d(1);U.length=Z.length}L[0]&16448&&_e(ne,i[6]),ee===(ee=T(i))&&le?le.p(i,L):(le.d(1),le=ee(i),le&&(le.c(),le.m(z,null))),L[0]&4&&ge(z,"padding-top",i[2]/2+"cm"),L[0]&4&&ge(z,"padding-bottom",i[2]/2+"cm")},i:ke,o:ke,d(i){i&&(p(e),p(oe),p(z)),pe(I,i),pe(V,i),pe(G,i),pe(U,i),le.d(),P=!1,dl(D)}}}let _l=8.5;function M(l){return l*96/2.54}function hl(l){if(l==null)return 0;const e=String(l).trim().replace(/\s/g,"");if(/,/.test(e)&&/\./.test(e)&&e.lastIndexOf(",")>e.lastIndexOf("."))return parseFloat(e.replace(/\./g,"").replace(",","."));const s=e.replace(new RegExp("(?<=\\d)[.,](?=\\d{3}(\\D|$))","g"),"");return parseFloat(s.replace(",","."))}function Ae(l,e){for(const s of e)if(l[s]!=null)return l[s];return 0}function Re(l,e){return e==="export"?hl(Ae(l,["Export (Real Value USD)","Export  (Real Value USD)"])):e==="import"?hl(Ae(l,["Import (Real Value USD)","Import  (Real Value USD)"])):e==="normPCI"?parseFloat(String(Ae(l,["Norm PCI"])).replace(",","."))||0:e==="normRCA"&&parseFloat(String(Ae(l,["Norm RCA"])).replace(",","."))||0}function ul(l){return l*2.54/96}function Il(l,e){const s=l.getBBox(),t=l.getBoundingClientRect(),a=t.width,n=t.height,f=Math.max(0,-s.y),m=Math.max(0,s.y+s.height-n),b=n+f+m,_=l.cloneNode(!0),u=document.createElement("style");u.textContent=`
    .path{fill:none;stroke:#111;stroke-width:2;opacity:.95}
    .grid-line,.tick-line{display:none}
    .baseline-line{stroke:#ddd;stroke-width:1}
  `,_.insertBefore(u,_.firstChild),_.setAttribute("viewBox",`0 ${-f} ${a} ${b}`),_.setAttribute("width",`${ul(a)}cm`),_.setAttribute("height",`${ul(b)}cm`);let g=new XMLSerializer().serializeToString(_);g=g.replace(/(<svg[^>]+)style="[^"]*background[^"]*"([^>]*>)/gi,"$1$2"),g=g.replace(/background:[^;"]*;?/gi,""),g=`<?xml version="1.0" encoding="UTF-8"?>
`+g;const h=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),y=URL.createObjectURL(h),c=document.createElement("a");c.href=y,c.download=e,document.body.appendChild(c),c.click(),setTimeout(()=>{document.body.removeChild(c),URL.revokeObjectURL(y)},150)}async function Al(){var e;const l=Array.from(document.querySelectorAll("svg.row-svg"));for(let s=0;s<l.length;s++){const t=l[s],a=(e=t.closest(".row"))==null?void 0:e.querySelector(".label button, .label span"),n=((a==null?void 0:a.textContent)||`chart_${s+1}`).trim().toLowerCase().replace(/[^a-z0-9_\-]+/g,"_");Il(t,`${n}.svg`),await new Promise(f=>setTimeout(f,160))}}function Ll(l,e,s){let t=21,a=1,n=6,f={left:.3,right:.3,top:.1,bottom:.1},m=[{key:"tradeBalanceDiff",label:"Trade balance "},{key:"export",label:"Export (Real Value USD)"},{key:"normPCI",label:"Norm PCI"},{key:"normRCA",label:"Norm RCA"}],b=m[0].key,_=[{key:"Chemical Vertical",label:"Chemical Vertical"},{key:"Nace-2 Label",label:"NACE-2"},{key:"NACE-4 Labels",label:"NACE-4"},{key:"HS92-2 Short Label",label:"HS92-2"},{key:"HS92-4 Short Label",label:"HS92-4"}],u=_[0].key,d=[{key:"az",label:"Groups A–Z"},{key:"valueDesc",label:"Groups by intensity ↓"},{key:"valueAsc",label:"Groups by intensity ↑"}],g=d[0].key,h=[{key:"az",label:"Items A–Z"},{key:"valueDesc",label:"Items by intensity ↓"},{key:"valueAsc",label:"Items by intensity ↑"}],y=h[0].key,c=[],N=[],A=[],$=[],C,E=new Set,B=new Set;function w(){var z;if(!N.length||!c.length||!C){A=[],s(8,$=[]);return}const fe=ze(N,P=>String(P["HS92-4 Short Label"]??"").trim()).sort(([P],[D])=>ue(P,D)),F=[];let x=0;for(const[P,D]of fe){const R=((z=D[0])==null?void 0:z[u])??"",I=Ne(D,T=>Se(T,ee=>Re(ee,"export")),T=>T.Year),re=Ne(D,T=>Se(T,ee=>Re(ee,"import")),T=>T.Year),V=Ne(D,T=>Se(T,ee=>Re(ee,b)),T=>T.Year);let W;b==="tradeBalanceDiff"?W=c.find(T=>(I.get(T)??0)!==0||(re.get(T)??0)!==0)??c[0]:W=c.find(T=>(V.get(T)??0)!==0)??c[0];const G=b==="tradeBalanceDiff"?(I.get(W)??0)-(re.get(W)??0):V.get(W)??0,Z=c.map(T=>{let ee;b==="tradeBalanceDiff"?ee=(I.get(T)??0)-(re.get(T)??0):ee=V.get(T)??0;const le=ee-G;return x=Math.max(x,Math.abs(le)),{year:T,value:le}}),U=Se(Z,T=>Math.abs(T.value));F.push({label:P,group:R,valuesAligned:Z,intensity:U})}(!Number.isFinite(x)||x===0)&&(x=1e-9);const ne=M(n);A=F.map(({label:P,group:D,valuesAligned:R,intensity:I})=>{const V=M(a)/2,W=Z=>V-Z/x*ne,G=El().x(Z=>C(Z.year)).y(Z=>W(Z.value))(R);return{label:P,group:D,values:R,path:G,y:{domain:()=>[-x,x],baselineY:V,toY:W,_:"pulsar"},total:I}});let oe=ze(A,P=>P.group).map(([P,D])=>({key:P,items:D,total:Se(D,R=>R.total)}));g==="az"?oe.sort((P,D)=>ue(P.key||"",D.key||"")):g==="valueDesc"?oe.sort((P,D)=>He(P.total,D.total)||ue(P.key||"",D.key||"")):g==="valueAsc"&&oe.sort((P,D)=>ue(P.total,D.total)||ue(P.key||"",D.key||"")),oe=oe.map(P=>{let D=P.items.slice();return y==="az"?D.sort((R,I)=>ue(R.label,I.label)):y==="valueDesc"?D.sort((R,I)=>He(R.total,I.total)||ue(R.label,I.label)):y==="valueAsc"&&D.sort((R,I)=>ue(R.total,I.total)||ue(R.label,I.label)),{...P,items:D}}),s(8,$=oe)}ml(async()=>{const fe=await bl(";","data/data.csv",F=>({...F,Year:+F.Year}));N=fe,s(7,c=Array.from(new Set(fe.map(F=>F.Year))).sort((F,x)=>F-x))});function q(){b=Ie(this),s(3,b),s(11,m)}function ie(){n=Ee(this.value),s(2,n)}function Y(){a=Ee(this.value),s(1,a)}function we(){t=Ee(this.value),s(0,t)}function he(){u=Ie(this),s(4,u),s(12,_)}function je(){g=Ie(this),s(5,g),s(13,d)}function ae(){y=Ie(this),s(6,y),s(14,h)}return l.$$.update=()=>{l.$$.dirty[0]&255&&(c.length&&s(9,C=kl().domain(yl(c)).range([M(f.left),M(t)-M(f.right)])),w())},[t,a,n,b,u,g,y,c,$,C,f,m,_,d,h,E,B,q,ie,Y,we,he,je,ae]}class Vl extends vl{constructor(e){super(),pl(this,e,Ll,Cl,gl,{},null,[-1,-1])}}export{Vl as component,Bl as universal};
